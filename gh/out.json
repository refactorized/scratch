[{"id":"20842311961","type":"PushEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":471538732,"name":"refactorized/some-graphs","url":"https://api.github.com/repos/refactorized/some-graphs"},"payload":{"push_id":9401372971,"size":1,"distinct_size":1,"ref":"refs/heads/main","head":"c9d72184d1aebd7c720565a49b74e187ae3f65eb","before":"2d5221a24790677fa8d8ecf00a5ec140a68c61f1","commits":[{"sha":"c9d72184d1aebd7c720565a49b74e187ae3f65eb","author":{"email":"adam.tolley@gmail.com","name":"Adam Tolley"},"message":"Update README.md","distinct":true,"url":"https://api.github.com/repos/refactorized/some-graphs/commits/c9d72184d1aebd7c720565a49b74e187ae3f65eb"}]},"public":true,"created_at":"2022-03-21T02:46:09Z"},{"id":"20827210237","type":"PushEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":471538732,"name":"refactorized/some-graphs","url":"https://api.github.com/repos/refactorized/some-graphs"},"payload":{"push_id":9391490169,"size":1,"distinct_size":1,"ref":"refs/heads/main","head":"2d5221a24790677fa8d8ecf00a5ec140a68c61f1","before":"6ba4102d518173556e5132ac1f17f8ae5e7850d3","commits":[{"sha":"2d5221a24790677fa8d8ecf00a5ec140a68c61f1","author":{"email":"adam.tolley@gmail.com","name":"Adam Tolley"},"message":"theophany paste","distinct":true,"url":"https://api.github.com/repos/refactorized/some-graphs/commits/2d5221a24790677fa8d8ecf00a5ec140a68c61f1"}]},"public":true,"created_at":"2022-03-18T23:04:16Z"},{"id":"20827156294","type":"PushEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":471538732,"name":"refactorized/some-graphs","url":"https://api.github.com/repos/refactorized/some-graphs"},"payload":{"push_id":9391460460,"size":1,"distinct_size":1,"ref":"refs/heads/main","head":"6ba4102d518173556e5132ac1f17f8ae5e7850d3","before":"10b45c5e8356f7d4def2b2e295a52475f5b5b90f","commits":[{"sha":"6ba4102d518173556e5132ac1f17f8ae5e7850d3","author":{"email":"adam.tolley@gmail.com","name":"Adam Tolley"},"message":"Create README.md","distinct":true,"url":"https://api.github.com/repos/refactorized/some-graphs/commits/6ba4102d518173556e5132ac1f17f8ae5e7850d3"}]},"public":true,"created_at":"2022-03-18T22:57:26Z"},{"id":"20827148289","type":"CreateEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":471538732,"name":"refactorized/some-graphs","url":"https://api.github.com/repos/refactorized/some-graphs"},"payload":{"ref":"main","ref_type":"branch","master_branch":"main","description":null,"pusher_type":"user"},"public":true,"created_at":"2022-03-18T22:56:19Z"},{"id":"20827148190","type":"CreateEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":471538732,"name":"refactorized/some-graphs","url":"https://api.github.com/repos/refactorized/some-graphs"},"payload":{"ref":null,"ref_type":"repository","master_branch":"master","description":null,"pusher_type":"user"},"public":true,"created_at":"2022-03-18T22:56:19Z"},{"id":"20728616469","type":"WatchEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":199742036,"name":"npm/treeverse","url":"https://api.github.com/repos/npm/treeverse"},"payload":{"action":"started"},"public":true,"created_at":"2022-03-14T06:53:08Z","org":{"id":6078720,"login":"npm","gravatar_id":"","url":"https://api.github.com/orgs/npm","avatar_url":"https://avatars.githubusercontent.com/u/6078720?"}},{"id":"20645203846","type":"PushEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":467660026,"name":"refactorized/netliflunk","url":"https://api.github.com/repos/refactorized/netliflunk"},"payload":{"push_id":9298826351,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"662d6f854f425ff372261c6e0e2209f3d4b9fcbe","before":"0d8c14c72f3d359e7426853b3448173fee5872bf","commits":[{"sha":"662d6f854f425ff372261c6e0e2209f3d4b9fcbe","author":{"email":"adam.tolley@gmail.com","name":"Adam Tolley"},"message":"try netlify functions","distinct":true,"url":"https://api.github.com/repos/refactorized/netliflunk/commits/662d6f854f425ff372261c6e0e2209f3d4b9fcbe"}]},"public":true,"created_at":"2022-03-08T20:23:38Z"},{"id":"20645063429","type":"PushEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":467660026,"name":"refactorized/netliflunk","url":"https://api.github.com/repos/refactorized/netliflunk"},"payload":{"push_id":9298756959,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"0d8c14c72f3d359e7426853b3448173fee5872bf","before":"a1661916d3d85b31f48eeb0521820741cce01b32","commits":[{"sha":"0d8c14c72f3d359e7426853b3448173fee5872bf","author":{"email":"adam.tolley@gmail.com","name":"Adam Tolley"},"message":"index","distinct":true,"url":"https://api.github.com/repos/refactorized/netliflunk/commits/0d8c14c72f3d359e7426853b3448173fee5872bf"}]},"public":true,"created_at":"2022-03-08T20:14:22Z"},{"id":"20645039942","type":"CreateEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":467660026,"name":"refactorized/netliflunk","url":"https://api.github.com/repos/refactorized/netliflunk"},"payload":{"ref":"master","ref_type":"branch","master_branch":"master","description":null,"pusher_type":"user"},"public":true,"created_at":"2022-03-08T20:12:46Z"},{"id":"20644977031","type":"CreateEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":467660026,"name":"refactorized/netliflunk","url":"https://api.github.com/repos/refactorized/netliflunk"},"payload":{"ref":null,"ref_type":"repository","master_branch":"master","description":null,"pusher_type":"user"},"public":true,"created_at":"2022-03-08T20:08:32Z"},{"id":"20337983762","type":"IssueCommentEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":70107786,"name":"vercel/next.js","url":"https://api.github.com/repos/vercel/next.js"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/vercel/next.js/issues/30802","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/30802/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/30802/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/30802/events","html_url":"https://github.com/vercel/next.js/issues/30802","id":1042252075,"node_id":"I_kwDOBC3Cis4-H4Er","number":30802,"title":"Port babel-plugin-styled-components to SWC","user":{"login":"timneutkens","id":6324199,"node_id":"MDQ6VXNlcjYzMjQxOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6324199?v=4","gravatar_id":"","url":"https://api.github.com/users/timneutkens","html_url":"https://github.com/timneutkens","followers_url":"https://api.github.com/users/timneutkens/followers","following_url":"https://api.github.com/users/timneutkens/following{/other_user}","gists_url":"https://api.github.com/users/timneutkens/gists{/gist_id}","starred_url":"https://api.github.com/users/timneutkens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timneutkens/subscriptions","organizations_url":"https://api.github.com/users/timneutkens/orgs","repos_url":"https://api.github.com/users/timneutkens/repos","events_url":"https://api.github.com/users/timneutkens/events{/privacy}","received_events_url":"https://api.github.com/users/timneutkens/received_events","type":"User","site_admin":false},"labels":[{"id":2108224381,"node_id":"MDU6TGFiZWwyMTA4MjI0Mzgx","url":"https://api.github.com/repos/vercel/next.js/labels/kind:%20story","name":"kind: story","color":"3075c9","default":false,"description":"A story that is on the backlog"},{"id":3499409926,"node_id":"LA_kwDOBC3Cis7QlMIG","url":"https://api.github.com/repos/vercel/next.js/labels/area:%20SWC%20transforms","name":"area: SWC transforms","color":"006B75","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"losfair","id":6104981,"node_id":"MDQ6VXNlcjYxMDQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/6104981?v=4","gravatar_id":"","url":"https://api.github.com/users/losfair","html_url":"https://github.com/losfair","followers_url":"https://api.github.com/users/losfair/followers","following_url":"https://api.github.com/users/losfair/following{/other_user}","gists_url":"https://api.github.com/users/losfair/gists{/gist_id}","starred_url":"https://api.github.com/users/losfair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/losfair/subscriptions","organizations_url":"https://api.github.com/users/losfair/orgs","repos_url":"https://api.github.com/users/losfair/repos","events_url":"https://api.github.com/users/losfair/events{/privacy}","received_events_url":"https://api.github.com/users/losfair/received_events","type":"User","site_admin":false},"assignees":[{"login":"losfair","id":6104981,"node_id":"MDQ6VXNlcjYxMDQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/6104981?v=4","gravatar_id":"","url":"https://api.github.com/users/losfair","html_url":"https://github.com/losfair","followers_url":"https://api.github.com/users/losfair/followers","following_url":"https://api.github.com/users/losfair/following{/other_user}","gists_url":"https://api.github.com/users/losfair/gists{/gist_id}","starred_url":"https://api.github.com/users/losfair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/losfair/subscriptions","organizations_url":"https://api.github.com/users/losfair/orgs","repos_url":"https://api.github.com/users/losfair/repos","events_url":"https://api.github.com/users/losfair/events{/privacy}","received_events_url":"https://api.github.com/users/losfair/received_events","type":"User","site_admin":false}],"milestone":null,"comments":32,"created_at":"2021-11-02T11:48:50Z","updated_at":"2022-02-18T16:21:48Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"This Babel plugin is the most used customization of `.babelrc`.\r\n\r\nThe plugin is split up in multiple separate transforms:\r\n\r\n[https://github.com/styled-components/babel-plugin-styled-components/blob/a26774e599c82c72e8793989f60310d29c181fac/src/index.js](https://github.com/styled-components/babel-plugin-styled-components/blob/a26774e599c82c72e8793989f60310d29c181fac/src/index.js)\r\n\r\nThe defaults are here: [https://github.com/styled-components/babel-plugin-styled-components/blob/950692b92855f17609e4281d5081e3d2acbf4b6b/src/utils/options.js](https://github.com/styled-components/babel-plugin-styled-components/blob/950692b92855f17609e4281d5081e3d2acbf4b6b/src/utils/options.js)\r\n\r\nThe critical one which makes styled-components not have hydration issues with Next.js is `displayNameAndId`. All the other ones seem to be optimizations. Because of this I'd start by porting the `displayNameAndId` transform and then check what else can be ported.\r\n\r\nLooking at the defaults the only transform that is disabled by default is the pure annotations one.\r\n\r\nList of transforms:\r\n- [x] ssr -- enabled when `styledComponents: true`\r\n- [x] displayName -- enabled when `styledComponents: true`, disabled in production to reduce file size\r\n- [ ] css prop\r\n- [ ] fileName\r\n- [ ] minify\r\n- [ ] transpileTemplateLiterals\r\n- [ ] pure\r\n- [ ] namespace\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/30802/reactions","total_count":133,"+1":85,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":20,"rocket":28,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/30802/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/1044783581","html_url":"https://github.com/vercel/next.js/issues/30802#issuecomment-1044783581","issue_url":"https://api.github.com/repos/vercel/next.js/issues/30802","id":1044783581,"node_id":"IC_kwDOBC3Cis4-RiHd","user":{"login":"refactorized","id":282710,"node_id":"MDQ6VXNlcjI4MjcxMA==","avatar_url":"https://avatars.githubusercontent.com/u/282710?v=4","gravatar_id":"","url":"https://api.github.com/users/refactorized","html_url":"https://github.com/refactorized","followers_url":"https://api.github.com/users/refactorized/followers","following_url":"https://api.github.com/users/refactorized/following{/other_user}","gists_url":"https://api.github.com/users/refactorized/gists{/gist_id}","starred_url":"https://api.github.com/users/refactorized/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/refactorized/subscriptions","organizations_url":"https://api.github.com/users/refactorized/orgs","repos_url":"https://api.github.com/users/refactorized/repos","events_url":"https://api.github.com/users/refactorized/events{/privacy}","received_events_url":"https://api.github.com/users/refactorized/received_events","type":"User","site_admin":false},"created_at":"2022-02-18T16:21:48Z","updated_at":"2022-02-18T16:21:48Z","author_association":"NONE","body":"> Unfortunately just saying \"it's not production ready\" without examples of your particular case is not going to resolve the issue you're running into.\r\n\r\nFair enough, and I why I tried to qualify my claim a bit. But by production ready, I mean I can use this thing, in production, instead of the babel transform.  The other package shouldn't be doing anything differently than I would myself writing functions that execute inside the template literal, but It would be good news all around if it were merely something in that package.\r\n\r\nI wasn't looking for a specific resolution (yet) so much as wanted to call out a caveat.  Next is a trusted name in the space, and I know a lot of people are (were) waiting for this to drop, so I wanted to get the warning out right away. Though if \"not production ready\" came off a little rough I apologize, I'm not trying to ruffle any feathers.\r\n\r\nI don't have an easy route to creating a minimal reproduction for this, but I am working on generalizing our internal platform and will have an opportunity to look into this in more depth, and also without that other library. I will create an actual issue for this if I have more trouble and can narrow it down to something reproducible.\r\n\r\nThanks","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/1044783581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-02-18T16:21:48Z","org":{"id":14985020,"login":"vercel","gravatar_id":"","url":"https://api.github.com/orgs/vercel","avatar_url":"https://avatars.githubusercontent.com/u/14985020?"}},{"id":"20303834789","type":"ForkEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":1239398,"name":"olado/doT","url":"https://api.github.com/repos/olado/doT"},"payload":{"forkee":{"id":460313379,"node_id":"R_kgDOG2_TIw","name":"doT","full_name":"refactorized/doT","private":false,"owner":{"login":"refactorized","id":282710,"node_id":"MDQ6VXNlcjI4MjcxMA==","avatar_url":"https://avatars.githubusercontent.com/u/282710?v=4","gravatar_id":"","url":"https://api.github.com/users/refactorized","html_url":"https://github.com/refactorized","followers_url":"https://api.github.com/users/refactorized/followers","following_url":"https://api.github.com/users/refactorized/following{/other_user}","gists_url":"https://api.github.com/users/refactorized/gists{/gist_id}","starred_url":"https://api.github.com/users/refactorized/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/refactorized/subscriptions","organizations_url":"https://api.github.com/users/refactorized/orgs","repos_url":"https://api.github.com/users/refactorized/repos","events_url":"https://api.github.com/users/refactorized/events{/privacy}","received_events_url":"https://api.github.com/users/refactorized/received_events","type":"User","site_admin":false},"html_url":"https://github.com/refactorized/doT","description":"The fastest + concise javascript template engine for nodejs and browsers. Partials, custom delimiters and more. ","fork":true,"url":"https://api.github.com/repos/refactorized/doT","forks_url":"https://api.github.com/repos/refactorized/doT/forks","keys_url":"https://api.github.com/repos/refactorized/doT/keys{/key_id}","collaborators_url":"https://api.github.com/repos/refactorized/doT/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/refactorized/doT/teams","hooks_url":"https://api.github.com/repos/refactorized/doT/hooks","issue_events_url":"https://api.github.com/repos/refactorized/doT/issues/events{/number}","events_url":"https://api.github.com/repos/refactorized/doT/events","assignees_url":"https://api.github.com/repos/refactorized/doT/assignees{/user}","branches_url":"https://api.github.com/repos/refactorized/doT/branches{/branch}","tags_url":"https://api.github.com/repos/refactorized/doT/tags","blobs_url":"https://api.github.com/repos/refactorized/doT/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/refactorized/doT/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/refactorized/doT/git/refs{/sha}","trees_url":"https://api.github.com/repos/refactorized/doT/git/trees{/sha}","statuses_url":"https://api.github.com/repos/refactorized/doT/statuses/{sha}","languages_url":"https://api.github.com/repos/refactorized/doT/languages","stargazers_url":"https://api.github.com/repos/refactorized/doT/stargazers","contributors_url":"https://api.github.com/repos/refactorized/doT/contributors","subscribers_url":"https://api.github.com/repos/refactorized/doT/subscribers","subscription_url":"https://api.github.com/repos/refactorized/doT/subscription","commits_url":"https://api.github.com/repos/refactorized/doT/commits{/sha}","git_commits_url":"https://api.github.com/repos/refactorized/doT/git/commits{/sha}","comments_url":"https://api.github.com/repos/refactorized/doT/comments{/number}","issue_comment_url":"https://api.github.com/repos/refactorized/doT/issues/comments{/number}","contents_url":"https://api.github.com/repos/refactorized/doT/contents/{+path}","compare_url":"https://api.github.com/repos/refactorized/doT/compare/{base}...{head}","merges_url":"https://api.github.com/repos/refactorized/doT/merges","archive_url":"https://api.github.com/repos/refactorized/doT/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/refactorized/doT/downloads","issues_url":"https://api.github.com/repos/refactorized/doT/issues{/number}","pulls_url":"https://api.github.com/repos/refactorized/doT/pulls{/number}","milestones_url":"https://api.github.com/repos/refactorized/doT/milestones{/number}","notifications_url":"https://api.github.com/repos/refactorized/doT/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/refactorized/doT/labels{/name}","releases_url":"https://api.github.com/repos/refactorized/doT/releases{/id}","deployments_url":"https://api.github.com/repos/refactorized/doT/deployments","created_at":"2022-02-17T06:42:30Z","updated_at":"2022-02-15T13:52:03Z","pushed_at":"2021-10-29T08:59:00Z","git_url":"git://github.com/refactorized/doT.git","ssh_url":"git@github.com:refactorized/doT.git","clone_url":"https://github.com/refactorized/doT.git","svn_url":"https://github.com/refactorized/doT","homepage":"","size":219,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"master","public":true}},"public":true,"created_at":"2022-02-17T06:42:31Z"},{"id":"20301485925","type":"IssueCommentEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":193940239,"name":"sanity-io/GROQ","url":"https://api.github.com/repos/sanity-io/GROQ"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/21","repository_url":"https://api.github.com/repos/sanity-io/GROQ","labels_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/labels{/name}","comments_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/comments","events_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/events","html_url":"https://github.com/sanity-io/GROQ/issues/21","id":583575555,"node_id":"MDU6SXNzdWU1ODM1NzU1NTU=","number":21,"title":"Auto dereferencing pipe function","user":{"login":"boyeborg","id":6630430,"node_id":"MDQ6VXNlcjY2MzA0MzA=","avatar_url":"https://avatars.githubusercontent.com/u/6630430?v=4","gravatar_id":"","url":"https://api.github.com/users/boyeborg","html_url":"https://github.com/boyeborg","followers_url":"https://api.github.com/users/boyeborg/followers","following_url":"https://api.github.com/users/boyeborg/following{/other_user}","gists_url":"https://api.github.com/users/boyeborg/gists{/gist_id}","starred_url":"https://api.github.com/users/boyeborg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boyeborg/subscriptions","organizations_url":"https://api.github.com/users/boyeborg/orgs","repos_url":"https://api.github.com/users/boyeborg/repos","events_url":"https://api.github.com/users/boyeborg/events{/privacy}","received_events_url":"https://api.github.com/users/boyeborg/received_events","type":"User","site_admin":false},"labels":[{"id":1424356644,"node_id":"MDU6TGFiZWwxNDI0MzU2NjQ0","url":"https://api.github.com/repos/sanity-io/GROQ/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2020-03-18T09:04:59Z","updated_at":"2022-02-17T02:35:18Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It would be really handy to have a pip function for automatic dereferencing. I'm not quite sure what the best approach would be. One possible solution is that it just dereference every reference it comes across with a predefined depth, like `*[ _id == \"some-document\" ] | deref(1)` (where 1 is the depth). This would look a lot like the \"raw\"-prefixed property provided when you're using graphql.\r\n\r\nOne scenario where this would be super useful is when you're having an array of several different objects, and some of those objects have references you'll want to dereference. This is a little cumbersome when using the dereferencing operator `->`.","reactions":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/reactions","total_count":37,"+1":29,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":8,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/comments/1042508787","html_url":"https://github.com/sanity-io/GROQ/issues/21#issuecomment-1042508787","issue_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21","id":1042508787,"node_id":"IC_kwDOC49LD84-I2vz","user":{"login":"refactorized","id":282710,"node_id":"MDQ6VXNlcjI4MjcxMA==","avatar_url":"https://avatars.githubusercontent.com/u/282710?v=4","gravatar_id":"","url":"https://api.github.com/users/refactorized","html_url":"https://github.com/refactorized","followers_url":"https://api.github.com/users/refactorized/followers","following_url":"https://api.github.com/users/refactorized/following{/other_user}","gists_url":"https://api.github.com/users/refactorized/gists{/gist_id}","starred_url":"https://api.github.com/users/refactorized/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/refactorized/subscriptions","organizations_url":"https://api.github.com/users/refactorized/orgs","repos_url":"https://api.github.com/users/refactorized/repos","events_url":"https://api.github.com/users/refactorized/events{/privacy}","received_events_url":"https://api.github.com/users/refactorized/received_events","type":"User","site_admin":false},"created_at":"2022-02-17T02:35:18Z","updated_at":"2022-02-17T02:35:18Z","author_association":"NONE","body":"> True - in our case it only ran build time so performance + quota limits were less of a concern. I don't recall we've thought about mapping sanity schema's to groq queries but I don't see why that wouldn't work (assuming the schema's are structured nicely). It has been a while though, haven't touched sanity for like 6 months.\r\n\r\nI think the part that's difficult is for list and nested structures of data that can be many different types.  Imagine a page-building CMS (our actual use case) in which each page can contain one of dozens of components and their associated data, each of which could likely include images and other assets presented as references.  The query for a page alone becomes very long and full of large select:case-like statements that pick out the right projection.  Default projections, or even projections passed into a query as a list of delegates could really clean things up.","reactions":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/comments/1042508787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-02-17T02:35:18Z","org":{"id":17177659,"login":"sanity-io","gravatar_id":"","url":"https://api.github.com/orgs/sanity-io","avatar_url":"https://avatars.githubusercontent.com/u/17177659?"}},{"id":"20301423440","type":"IssueCommentEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":1239398,"name":"olado/doT","url":"https://api.github.com/repos/olado/doT"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/olado/doT/issues/310","repository_url":"https://api.github.com/repos/olado/doT","labels_url":"https://api.github.com/repos/olado/doT/issues/310/labels{/name}","comments_url":"https://api.github.com/repos/olado/doT/issues/310/comments","events_url":"https://api.github.com/repos/olado/doT/issues/310/events","html_url":"https://github.com/olado/doT/pull/310","id":1039339520,"node_id":"PR_kwDOABLpZs4t1rpc","number":310,"title":"readme: fix link to olado.github.io, http -> https","user":{"login":"milahu","id":12958815,"node_id":"MDQ6VXNlcjEyOTU4ODE1","avatar_url":"https://avatars.githubusercontent.com/u/12958815?v=4","gravatar_id":"","url":"https://api.github.com/users/milahu","html_url":"https://github.com/milahu","followers_url":"https://api.github.com/users/milahu/followers","following_url":"https://api.github.com/users/milahu/following{/other_user}","gists_url":"https://api.github.com/users/milahu/gists{/gist_id}","starred_url":"https://api.github.com/users/milahu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milahu/subscriptions","organizations_url":"https://api.github.com/users/milahu/orgs","repos_url":"https://api.github.com/users/milahu/repos","events_url":"https://api.github.com/users/milahu/events{/privacy}","received_events_url":"https://api.github.com/users/milahu/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-29T08:58:59Z","updated_at":"2022-02-17T02:28:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/olado/doT/pulls/310","html_url":"https://github.com/olado/doT/pull/310","diff_url":"https://github.com/olado/doT/pull/310.diff","patch_url":"https://github.com/olado/doT/pull/310.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/olado/doT/issues/310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/olado/doT/issues/310/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/olado/doT/issues/comments/1042505736","html_url":"https://github.com/olado/doT/pull/310#issuecomment-1042505736","issue_url":"https://api.github.com/repos/olado/doT/issues/310","id":1042505736,"node_id":"IC_kwDOABLpZs4-I2AI","user":{"login":"refactorized","id":282710,"node_id":"MDQ6VXNlcjI4MjcxMA==","avatar_url":"https://avatars.githubusercontent.com/u/282710?v=4","gravatar_id":"","url":"https://api.github.com/users/refactorized","html_url":"https://github.com/refactorized","followers_url":"https://api.github.com/users/refactorized/followers","following_url":"https://api.github.com/users/refactorized/following{/other_user}","gists_url":"https://api.github.com/users/refactorized/gists{/gist_id}","starred_url":"https://api.github.com/users/refactorized/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/refactorized/subscriptions","organizations_url":"https://api.github.com/users/refactorized/orgs","repos_url":"https://api.github.com/users/refactorized/repos","events_url":"https://api.github.com/users/refactorized/events{/privacy}","received_events_url":"https://api.github.com/users/refactorized/received_events","type":"User","site_admin":false},"created_at":"2022-02-17T02:28:28Z","updated_at":"2022-02-17T02:28:28Z","author_association":"NONE","body":"This looks good, please merge it.  Having that link 404 makes it seem like this project isn't maintained and sends people down the road of looking for other templating engines.\r\n\r\n(Of course the site it should link to seems to have a few problems of its own, but that's for another issue)","reactions":{"url":"https://api.github.com/repos/olado/doT/issues/comments/1042505736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-02-17T02:28:28Z"},{"id":"20275174809","type":"IssueCommentEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":70107786,"name":"vercel/next.js","url":"https://api.github.com/repos/vercel/next.js"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/vercel/next.js/issues/30802","repository_url":"https://api.github.com/repos/vercel/next.js","labels_url":"https://api.github.com/repos/vercel/next.js/issues/30802/labels{/name}","comments_url":"https://api.github.com/repos/vercel/next.js/issues/30802/comments","events_url":"https://api.github.com/repos/vercel/next.js/issues/30802/events","html_url":"https://github.com/vercel/next.js/issues/30802","id":1042252075,"node_id":"I_kwDOBC3Cis4-H4Er","number":30802,"title":"Port babel-plugin-styled-components to SWC","user":{"login":"timneutkens","id":6324199,"node_id":"MDQ6VXNlcjYzMjQxOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6324199?v=4","gravatar_id":"","url":"https://api.github.com/users/timneutkens","html_url":"https://github.com/timneutkens","followers_url":"https://api.github.com/users/timneutkens/followers","following_url":"https://api.github.com/users/timneutkens/following{/other_user}","gists_url":"https://api.github.com/users/timneutkens/gists{/gist_id}","starred_url":"https://api.github.com/users/timneutkens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timneutkens/subscriptions","organizations_url":"https://api.github.com/users/timneutkens/orgs","repos_url":"https://api.github.com/users/timneutkens/repos","events_url":"https://api.github.com/users/timneutkens/events{/privacy}","received_events_url":"https://api.github.com/users/timneutkens/received_events","type":"User","site_admin":false},"labels":[{"id":2108224381,"node_id":"MDU6TGFiZWwyMTA4MjI0Mzgx","url":"https://api.github.com/repos/vercel/next.js/labels/kind:%20story","name":"kind: story","color":"3075c9","default":false,"description":"A story that is on the backlog"},{"id":3499409926,"node_id":"LA_kwDOBC3Cis7QlMIG","url":"https://api.github.com/repos/vercel/next.js/labels/area:%20SWC%20transforms","name":"area: SWC transforms","color":"006B75","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"losfair","id":6104981,"node_id":"MDQ6VXNlcjYxMDQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/6104981?v=4","gravatar_id":"","url":"https://api.github.com/users/losfair","html_url":"https://github.com/losfair","followers_url":"https://api.github.com/users/losfair/followers","following_url":"https://api.github.com/users/losfair/following{/other_user}","gists_url":"https://api.github.com/users/losfair/gists{/gist_id}","starred_url":"https://api.github.com/users/losfair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/losfair/subscriptions","organizations_url":"https://api.github.com/users/losfair/orgs","repos_url":"https://api.github.com/users/losfair/repos","events_url":"https://api.github.com/users/losfair/events{/privacy}","received_events_url":"https://api.github.com/users/losfair/received_events","type":"User","site_admin":false},"assignees":[{"login":"losfair","id":6104981,"node_id":"MDQ6VXNlcjYxMDQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/6104981?v=4","gravatar_id":"","url":"https://api.github.com/users/losfair","html_url":"https://github.com/losfair","followers_url":"https://api.github.com/users/losfair/followers","following_url":"https://api.github.com/users/losfair/following{/other_user}","gists_url":"https://api.github.com/users/losfair/gists{/gist_id}","starred_url":"https://api.github.com/users/losfair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/losfair/subscriptions","organizations_url":"https://api.github.com/users/losfair/orgs","repos_url":"https://api.github.com/users/losfair/repos","events_url":"https://api.github.com/users/losfair/events{/privacy}","received_events_url":"https://api.github.com/users/losfair/received_events","type":"User","site_admin":false}],"milestone":null,"comments":29,"created_at":"2021-11-02T11:48:50Z","updated_at":"2022-02-15T19:59:04Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"This Babel plugin is the most used customization of `.babelrc`.\r\n\r\nThe plugin is split up in multiple separate transforms:\r\n\r\n[https://github.com/styled-components/babel-plugin-styled-components/blob/a26774e599c82c72e8793989f60310d29c181fac/src/index.js](https://github.com/styled-components/babel-plugin-styled-components/blob/a26774e599c82c72e8793989f60310d29c181fac/src/index.js)\r\n\r\nThe defaults are here: [https://github.com/styled-components/babel-plugin-styled-components/blob/950692b92855f17609e4281d5081e3d2acbf4b6b/src/utils/options.js](https://github.com/styled-components/babel-plugin-styled-components/blob/950692b92855f17609e4281d5081e3d2acbf4b6b/src/utils/options.js)\r\n\r\nThe critical one which makes styled-components not have hydration issues with Next.js is `displayNameAndId`. All the other ones seem to be optimizations. Because of this I'd start by porting the `displayNameAndId` transform and then check what else can be ported.\r\n\r\nLooking at the defaults the only transform that is disabled by default is the pure annotations one.\r\n\r\nList of transforms:\r\n- [x] ssr -- enabled when `styledComponents: true`\r\n- [x] displayName -- enabled when `styledComponents: true`, disabled in production to reduce file size\r\n- [ ] css prop\r\n- [ ] fileName\r\n- [ ] minify\r\n- [ ] transpileTemplateLiterals\r\n- [ ] pure\r\n- [ ] namespace\r\n","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/30802/reactions","total_count":132,"+1":84,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":20,"rocket":28,"eyes":0},"timeline_url":"https://api.github.com/repos/vercel/next.js/issues/30802/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/1040732900","html_url":"https://github.com/vercel/next.js/issues/30802#issuecomment-1040732900","issue_url":"https://api.github.com/repos/vercel/next.js/issues/30802","id":1040732900,"node_id":"IC_kwDOBC3Cis4-CFLk","user":{"login":"refactorized","id":282710,"node_id":"MDQ6VXNlcjI4MjcxMA==","avatar_url":"https://avatars.githubusercontent.com/u/282710?v=4","gravatar_id":"","url":"https://api.github.com/users/refactorized","html_url":"https://github.com/refactorized","followers_url":"https://api.github.com/users/refactorized/followers","following_url":"https://api.github.com/users/refactorized/following{/other_user}","gists_url":"https://api.github.com/users/refactorized/gists{/gist_id}","starred_url":"https://api.github.com/users/refactorized/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/refactorized/subscriptions","organizations_url":"https://api.github.com/users/refactorized/orgs","repos_url":"https://api.github.com/users/refactorized/repos","events_url":"https://api.github.com/users/refactorized/events{/privacy}","received_events_url":"https://api.github.com/users/refactorized/received_events","type":"User","site_admin":false},"created_at":"2022-02-15T19:59:04Z","updated_at":"2022-02-15T19:59:04Z","author_association":"NONE","body":"From my brief experience of axing our .babelrc (which only had next/babel and \"babel-plugin-styled-components), the transform doesn't seem production ready.  \r\n\r\nWe had several class names fail to hydrate correctly, it seems, and styles were broken in random places around the site.  We don't use the css prop, just regular styled components.  There are a couple places that use styled-system, but that just leverages plain styled components too, iirc. \r\n\r\nPutting the .babelrc back fixed all the issues we were seeing.  I dunno.","reactions":{"url":"https://api.github.com/repos/vercel/next.js/issues/comments/1040732900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-02-15T19:59:04Z","org":{"id":14985020,"login":"vercel","gravatar_id":"","url":"https://api.github.com/orgs/vercel","avatar_url":"https://avatars.githubusercontent.com/u/14985020?"}},{"id":"20254597815","type":"IssueCommentEvent","actor":{"id":282710,"login":"refactorized","display_login":"refactorized","gravatar_id":"","url":"https://api.github.com/users/refactorized","avatar_url":"https://avatars.githubusercontent.com/u/282710?"},"repo":{"id":193940239,"name":"sanity-io/GROQ","url":"https://api.github.com/repos/sanity-io/GROQ"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/21","repository_url":"https://api.github.com/repos/sanity-io/GROQ","labels_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/labels{/name}","comments_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/comments","events_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/events","html_url":"https://github.com/sanity-io/GROQ/issues/21","id":583575555,"node_id":"MDU6SXNzdWU1ODM1NzU1NTU=","number":21,"title":"Auto dereferencing pipe function","user":{"login":"boyeborg","id":6630430,"node_id":"MDQ6VXNlcjY2MzA0MzA=","avatar_url":"https://avatars.githubusercontent.com/u/6630430?v=4","gravatar_id":"","url":"https://api.github.com/users/boyeborg","html_url":"https://github.com/boyeborg","followers_url":"https://api.github.com/users/boyeborg/followers","following_url":"https://api.github.com/users/boyeborg/following{/other_user}","gists_url":"https://api.github.com/users/boyeborg/gists{/gist_id}","starred_url":"https://api.github.com/users/boyeborg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boyeborg/subscriptions","organizations_url":"https://api.github.com/users/boyeborg/orgs","repos_url":"https://api.github.com/users/boyeborg/repos","events_url":"https://api.github.com/users/boyeborg/events{/privacy}","received_events_url":"https://api.github.com/users/boyeborg/received_events","type":"User","site_admin":false},"labels":[{"id":1424356644,"node_id":"MDU6TGFiZWwxNDI0MzU2NjQ0","url":"https://api.github.com/repos/sanity-io/GROQ/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2020-03-18T09:04:59Z","updated_at":"2022-02-14T21:35:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"It would be really handy to have a pip function for automatic dereferencing. I'm not quite sure what the best approach would be. One possible solution is that it just dereference every reference it comes across with a predefined depth, like `*[ _id == \"some-document\" ] | deref(1)` (where 1 is the depth). This would look a lot like the \"raw\"-prefixed property provided when you're using graphql.\r\n\r\nOne scenario where this would be super useful is when you're having an array of several different objects, and some of those objects have references you'll want to dereference. This is a little cumbersome when using the dereferencing operator `->`.","reactions":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/reactions","total_count":34,"+1":27,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":7,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21/timeline","performed_via_github_app":null},"comment":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/comments/1039589239","html_url":"https://github.com/sanity-io/GROQ/issues/21#issuecomment-1039589239","issue_url":"https://api.github.com/repos/sanity-io/GROQ/issues/21","id":1039589239,"node_id":"IC_kwDOC49LD8499t93","user":{"login":"refactorized","id":282710,"node_id":"MDQ6VXNlcjI4MjcxMA==","avatar_url":"https://avatars.githubusercontent.com/u/282710?v=4","gravatar_id":"","url":"https://api.github.com/users/refactorized","html_url":"https://github.com/refactorized","followers_url":"https://api.github.com/users/refactorized/followers","following_url":"https://api.github.com/users/refactorized/following{/other_user}","gists_url":"https://api.github.com/users/refactorized/gists{/gist_id}","starred_url":"https://api.github.com/users/refactorized/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/refactorized/subscriptions","organizations_url":"https://api.github.com/users/refactorized/orgs","repos_url":"https://api.github.com/users/refactorized/repos","events_url":"https://api.github.com/users/refactorized/events{/privacy}","received_events_url":"https://api.github.com/users/refactorized/received_events","type":"User","site_admin":false},"created_at":"2022-02-14T21:35:22Z","updated_at":"2022-02-14T21:35:22Z","author_association":"NONE","body":"@kmelve I think a lot of this just comes down to DX.  If we want a (even partially) generalized solution for auto-dereferencing we have to write one ourselves, and that means either n+1 type issues or a fairly complex system for using the schema and/or api to create fully expressive queries - which as shown above can be really long if done manually.  All this work certainly will beg the question 'what is sanity really doing for me here?'.  \r\n\r\nI understand that auto-dereferencing is a complicated issue that also invites a lot of misuse, but I don't think it's something that can be left to the developer indefinitely.  My team, as I guess many others, are building a platform on top of sanity, and this is one of those 'just works' features we either need to create or (preferably) utilize.\r\n\r\nOne of my suggestions ( here: https://github.com/sanity-io/sanity/issues/2771 ) is to leverage what seems to be the already existing functionality for selecting and projecting results used to describe studio preview rendering in the schema.  I was super excited when I saw how simple it seemed to work for previews.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/sanity-io/GROQ/issues/comments/1039589239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-02-14T21:35:23Z","org":{"id":17177659,"login":"sanity-io","gravatar_id":"","url":"https://api.github.com/orgs/sanity-io","avatar_url":"https://avatars.githubusercontent.com/u/17177659?"}}]